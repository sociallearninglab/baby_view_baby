function generateProtocol(child, pastSessions) {
  return {
      frames: {
          'welcome': {
              'kind': 'exp-lookit-text',
              'blocks': [{
                  'title': 'Welcome!'
              }],
              'showPreviousButton': false,
              'nextButtonText': "Click here to start!"
          },
          'video-config': {
              'kind': 'exp-video-config',
              'introText': "First, we'll make sure that you and your child are all set up."
          },

          'start-recording': {
              'kind': 'exp-lookit-start-recording',
              'imageAnimation': 'spin',
              'displayFullscreen': true
          },


          'video-consent': {
              "gdpr": false,
              'kind': 'exp-lookit-video-consent',
              'template': 'consent_005',
              'PIName': 'Adani Abutto',
              'institution': 'Stanford University',
              'PIContact': 'Adani Abutto (sll_lookit@stanford.edu)',
              'purpose': 'One of the first things an infant encounters is themselves, but we know only little about the nature and origins of the "the self" and how it may change throughout development. One possible indicator of self-awareness is to visually recognize oneself; people regularly spend time in front of mirrors to assess and adjust their appearance. In this study, we aim to broadly explore how infants at the very beginning of their development react and behave when seeing themselves on a screen.',
              'risk_statement': 'There are no expected risks if you participate in the study.',
              'voluntary_participation': 'Participation in this study is entirely optional, and you are free to exit at any time.',
              'payment': 'There are no costs to participating. There are also no known risks associated with this study beyond those of everyday life. Although this study will not benefit your child directly, it will add to our understanding of how children think in general. You will get compensated if you meet the stated requirements.',
              'datause': 'The researchers and study staff follow federal and state laws to protect your privacy, so all of your information and research records will be kept confidential. The only exception to these procedures for maintaining confidentiality is that we are required by law to report to the appropriate authorities suspicion of harm to your child or to others. More information on how we keep your videos and data private can be found at lookit.mit.edu/faq.',
              'research_rights_statement': 'The Institutional Review Board (IRB) of Stanford University has approved this research study. If you have questions regarding your rights as a research subject you may contact the IRB office at 650-723-2480, or by mail at Research Compliance Office, Stanford University, 1705 El Camino Real, Palo Alto, CA 94306.'
          },


          "audio-check": {
              "kind": "exp-lookit-instructions",
              "blocks": [{
                      "title": "Instructions (Your child does not need to be with you yet)"
                  },
                  {
                      "title": "What's going to happen:",
                      "listblocks": [{
                              "text": "First, we'll make sure that you and your child are all set up."
                          },
                          {
                              "text": "Then, your child will see and be able to watch themselves on the computer screen. This phase will last 3 minutes."
                          },
                      ]
                  },
                  {
                      "text": "Please turn the volume up so it's easy to hear but still comfortable.",
                      "title": "First things first: checking your audio!",
                      "mediaBlock": {
                          "text": "You should hear 'Ready to go?'",
                          "isVideo": false,
                          "sources": [{
                                  "src": "https://s3.amazonaws.com/lookitcontents/exp-physics-final/audio/ready.mp3",
                                  "type": "audio/mp3"
                              },
                              {
                                  "src": "https://s3.amazonaws.com/lookitcontents/exp-physics-final/audio/ready.ogg",
                                  "type": "audio/ogg"
                              }
                          ],
                          "mustPlay": true,
                          "warningText": "Please try playing the sample audio."
                      },
                  },
              ],
              "nextButtonText": "More instructions!"
          },



          'instruction-video': {
              'kind': 'exp-lookit-instructions',
              'blocks': [{
                  "title": "Play the video below to see what will happen during the study.",
                  'mediaBlock': {
                      'isVideo': true,
                      'sources': [{
                          'src': 'https://sociallearninglab.github.io/baby_view_baby/mp4/instructions.mp4',
                          "type": "video/mp4"
                      }],
                      'autoplay': true,
                      'mustPlay': true,
                      "warningText": "Please finish watching the video."
                  }
              }],
              'showWebcam': false,
              'doRecording': true,
              'nextButtonText': 'Next'
          },

          "instructions-3": {
              "kind": "exp-lookit-instructions",
              "blocks": [{
                      "title": "Let's get set up!"
                  },
                  {
                      "text": "\nPlease put the laptop or <b>computer close to the baby</b>, but far enough so that they can't reach forward and touch anything. \n\n If possible, complete the study in a <b>quiet room</b>, away from windows, open doorways, toys, pets, siblings - interesting things to look at and reach for. For example, a home office is better than a busy kitchen (We understand if not all of this is possible!) \n\n",
                      "image": {
                          "alt": "No distractions",
                          "src": "https://www.mit.edu/~kimscott/intermodal/img/distractions.png"
                      }
                  },
                  {
                      "text": "\n\n Please make sure your <b>webcam is centered</b> on the screen (this should be the case for most laptops). \n\n ",
                      "image": {
                          "alt": "Center camera",
                          "src": "https://www.mit.edu/~kimscott/intermodal/img/centering.png"
                      }
                  },
                  {
                      "text": "\n\n If you are using two monitors, please turn one of them off. \n\n ",
                      "image": {
                          "alt": "Turn off monitor",
                          "src": "https://www.mit.edu/~kimscott/intermodal/img/monitors.png"
                      }
                  },
                  {
                      "text": "\n\n Now, you can go ahead and <b>put your child in a high chair and stand behind them</b>. \n\n",
                      "image": {
                          "alt": "Child in high chair",
                          "src": "https://raw.githubusercontent.com/GalRaz/mcs_lookit_stims/master/baby_high_chair.jpg",
                          "width": 50
                      }
                  },
                  {
                      "text": "\n\n <b>Don’t worry if your child isn’t looking at the screen the entire time!</b> There's no need to direct your child's attention towards the screen, since we want to see the decisions your child makes on their own! You can just try to keep their body oriented towards the screen so they can look if they want to.\n\n"
                  },
                  {
                      "title": "Ready? If your child is set up, press the 'Check video!' button!"
                  }
              ],
              "nextButtonText": "Check video!"
          },


          "webcam-display-check": {
              "kind": "exp-lookit-webcam-display",
              "nextButtonText": "Next",
              "showPreviousButton": false,
              "displayFullscreenOverride": true,
              "startRecordingAutomatically": true
              },



          "mirror-trial": {
              "kind": "exp-lookit-mirror",
              "nextButtonText": "Continue",
              "showPreviousButton": false,
              "displayFullscreenOverride": true,
              "songUrl": "https://github.com/sociallearninglab/baby_view_baby/raw/refs/heads/main/mp3/song.mp3"
          },



          'stop-recording': {
              'kind': 'exp-lookit-stop-recording',
              'imageAnimation': 'spin',
              'displayFullscreen': true,
              'showProgressBar': true,
              'waitForUploadMessage': 'Uploading video... Please wait.',
          },




          "mirror-questions": {
            "kind": "exp-lookit-survey",
            "showPreviousButton": true,
            "nextButtonText": "Next",
            "formSchema": {
              "schema": {
                "type": "object",
                "title": "Child Media and Mirror Experiences",
                "properties": {
                  "introText": {
                    "type": "string",
                    "title": "In this survey, we are interested in your child's prior experience seeing themselves on screens and in mirrors. In answering the questions below, we encourage you to give your responses as best you can recall (that is, your best estimate or guess)."
                  },
                  "mirrorFirstAge": {
                    "type": "string",
                    "title": "1-1. At which age did your child look in a mirror for the first time? Please provide your answer in MONTHS of age (if you're not sure, please provide your best guess).",
                    "required": true
                  },
                  "mirrorFrequency": {
                    "enum": [
                      "never",
                      "less-than-weekly",
                      "weekly",
                      "several-times-weekly",
                      "daily",
                      "several-times-daily"
                    ],
                    "type": "string",
                    "title": "1-2. In the last MONTH or so, how often did your child look in a mirror?",
                    "required": true,
                    "default": "never"
                  },
                  "mirrorResponse": {
                    "type": "array",
                    "title": "1-3. How does your child usually respond to seeing themselves in a mirror? (select all that apply)",
                    "items": {
                      "type": "string",
                      "enum": [
                        "smiles",
                        "gets-excited",
                        "laughs",
                        "reaches-toward-mirror", 
                        "doesnt-notice",
                        "gets-upset",
                        "other",
                        "prefer-not-to-answer"
                      ]
                    },
                    "required": true
                  },
                  "mirrorResponseOther": {
                    "type": "string",
                    "title": "If you selected 'Other' above, please specify how your child responds to mirrors:",
                    "required": false
                  },
                  "screenFirstAge": {
                    "type": "string",
                    "title": "2-1. At which age did your child first see themselves on a screen? (e.g., camera app on a smartphone, FaceTime, Zoom) Please provide your answer in MONTHS of age (if you're not sure, please provide your best guess).",
                    "required": true
                  },
                  "screenFrequency": {
                    "enum": [
                      "never",
                      "less-than-weekly",
                      "weekly",
                      "several-times-weekly",
                      "daily",
                      "several-times-daily"
                    ],
                    "type": "string",
                    "title": "2-2. In the last MONTH, how often did your child see themselves on a screen? (e.g., FaceTime on the phone or tablet, Zoom on a computer, ...)",
                    "required": true,
                    "default": "never"
                  },
                  "screenResponse": {
                    "type": "array",
                    "title": "2-3. How does your child usually respond to seeing themselves on a screen? (select all that apply)",
                    "items": {
                      "type": "string",
                      "enum": [
                        "smiles",
                        "gets-excited",
                        "laughs",
                        "reaches-toward-screen",
                        "doesnt-notice",
                        "gets-upset",
                        "other",
                        "prefer-not-to-answer"
                      ]
                    },
                    "required": true
                  },
                  "screenResponseOther": {
                    "type": "string",
                    "title": "If you selected 'Other' above, please specify how your child responds to screens:",
                    "required": false
                  },
                  "videoFirstAge": {
                    "type": "string",
                    "title": "3-1. At which age did your child first see a VIDEO of themselves? Please provide your answer in MONTHS of age (if you're not sure, please provide your best guess).",
                    "required": true
                  },
                  "videoFrequency": {
                    "enum": [
                      "never",
                      "less-than-weekly",
                      "weekly",
                      "several-times-weekly",
                      "daily",
                      "several-times-daily"
                    ],
                    "type": "string",
                    "title": "3-2. In the last MONTH, how often did your child see a VIDEO of themselves? (e.g., on the phone, tablet, computer, video camera, ...)",
                    "required": true,
                    "default": "never"
                  },
                  "videoResponse": {
                    "type": "array",
                    "title": "3-3. How does your child usually respond to seeing a video of themselves? (select all that apply)",
                    "items": {
                      "type": "string",
                      "enum": [
                        "smiles",
                        "gets-excited",
                        "laughs",
                        "reaches-toward-screen",
                        "doesnt-notice",
                        "gets-upset",
                        "other"
                      ]
                    },
                    "required": true
                  },
                  "videoResponseOther": {
                    "type": "string",
                    "title": "If you selected 'Other' above, please specify how your child responds to videos:",
                    "required": false
                  },
                  "interruptions": {
                    "type": "string",
                    "title": "4-1. Did you and/or your child experience any interruptions during the study? (e.g., phone call, alerts or notifications appearing on the computer, person entering the room)",
                    "required": false
                  },
                  "additionalComments": {
                    "type": "string",
                    "title": "4-2. Are there any other comments or feedback you would like to share?",
                    "required": false
                  }
                },
                "dependencies": {
                  "mirrorResponseOther": ["mirrorResponse"],
                  "screenResponseOther": ["screenResponse"],
                  "videoResponseOther": ["videoResponse"]
                }
              },
              "options": {
                "fields": {
                  "introText": {
                    "type": "object",
                    "view": "bootstrap-display"
                  },
                  "mirrorFirstAge": {
                    "type": "text",
                    "placeholder": "e.g., 3",
                    "message": "Please provide an age in months"
                  },
                  "screenFirstAge": {
                    "type": "text",
                    "placeholder": "e.g., 3",
                    "message": "Please provide an age in months"
                  },
                  "videoFirstAge": {
                    "type": "text",
                    "placeholder": "e.g., 3",
                    "message": "Please provide an age in months"
                  },
                  "mirrorFrequency": {
                    "type": "radio",
                    "message": "Please select how frequently your child looks in the mirror",
                    "sort": false,
                    "removeDefaultNone": true,
                    "noneLabel": "",
                    "hideNone": true,
                    "optionLabels": [
                      "Please choose one",
                      "Never",
                      "Less than once a week",
                      "Once a week",
                      "Several times a week",
                      "Once a day",
                      "Several times a day"
                    ]
                  },
                  "screenFrequency": {
                    "type": "radio",
                    "message": "Please select how frequently your child sees themselves on a screen",
                    "sort": false,
                    "removeDefaultNone": true,
                    "noneLabel": "",
                    "hideNone": true,
                    "optionLabels": [
                      "Please choose one",
                      "Never",
                      "Less than once a week",
                      "Once a week",
                      "Several times a week",
                      "Once a day",
                      "Several times a day"
                    ]
                  },
                  "videoFrequency": {
                    "type": "radio",
                    "message": "Please select how frequently your child sees videos of themselves",
                    "sort": false,
                    "removeDefaultNone": true,
                    "noneLabel": "",
                    "hideNone": true,
                    "optionLabels": [
                      "Please choose one",
                      "Never",
                      "Less than once a week",
                      "Once a week",
                      "Several times a week",
                      "Once a day",
                      "Several times a day"
                    ]
                  },
                  "mirrorResponse": {
                    "type": "checkbox",
                    "message": "Please select all responses that apply",
                    "sort": false,
                    "removeDefaultNone": true,
                    "optionLabels": [
                      "Smiles",
                      "Gets excited",
                      "Laughs",
                      "Reaches toward mirror",
                      "Doesn't seem to care/notice",
                      "Gets upset",
                      "Other (please specify)",
                      "Prefer not to answer"
                    ]
                  },
                  "screenResponse": {
                    "type": "checkbox",
                    "message": "Please select all responses that apply",
                    "sort": false,
                    "removeDefaultNone": true,
                    "optionLabels": [
                      "Smiles",
                      "Gets excited",
                      "Laughs",
                      "Reaches toward screen",
                      "Doesn't seem to care/notice",
                      "Gets upset",
                      "Other (please specify)",
                      "Prefer not to answer"
                    ]
                  },
                  "videoResponse": {
                    "type": "checkbox",
                    "message": "Please select all responses that apply",
                    "sort": false,
                    "removeDefaultNone": true,
                    "optionLabels": [
                      "Smiles",
                      "Gets excited",
                      "Laughs",
                      "Reaches toward screen",
                      "Doesn't seem to care/notice",
                      "Gets upset",
                      "Other (please specify)"
                    ]
                  },
                  "mirrorResponseOther": {
                    "type": "text",
                    "placeholder": "Please describe how your child responds",
                    "dependencies": {
                      "mirrorResponse": "other"
                    }
                  },
                  "screenResponseOther": {
                    "type": "text",
                    "placeholder": "Please describe how your child responds",
                    "dependencies": {
                      "screenResponse": "other"
                    }
                  },
                  "videoResponseOther": {
                    "type": "text",
                    "placeholder": "Please describe how your child responds",
                    "dependencies": {
                      "videoResponse": "other"
                    }
                  },
                  "interruptions": {
                    "type": "textarea",
                    "placeholder": "Please describe any interruptions here",
                    "rows": 3
                  },
                  "additionalComments": {
                    "type": "textarea",
                    "placeholder": "Please share any additional comments here",
                    "rows": 3
                  }
                },
                "hideInitValidationError": true
              }
            }
          },


          "exit-survey": {
              "kind": "exp-lookit-exit-survey",
              "debriefing": {
                  "title": "Thank you for participating!",
                  "blocks": [{
                          "title": "",
                          "text": "This research wouldn't be possible without awesome parents like you."
                      },
                      {
                          "title": "Some Background Information:",
                          "text": "One of the first things an infant encounters is themselves, but we know only little about the nature and origins of the 'self' and how it may change throughout development. One possible indicator of self-awareness is to visually recognize oneself; people regularly spend time in front of mirrors to assess and adjust their appearance. In this study, we aim to broadly explore how infants at the very beginning of their development react and behave when seeing themselves on a screen."
                      },
                      {
                          "title": "Additional Resources:",
                          "text": "To learn more about this topic, you can check out some of the following works and resources:<br><a href='https://youtu.be/M2I0kwSua44?si=Sc_Q7Ex0bFOmh0KB' target='_blank'>A video about the Mirror Task</a><br><a href='https://www.youtube.com/watch?v=y1KIVZw7Jxk' target='_blank'>TED Talk by Laura Schulz: The surprisingly logical minds of babies</a>"
                      },
                      {
                          "title": "Compensation:",
                          "text": "To thank you for your participation, we'll be emailing you a $5 USD Amazon gift card - this should arrive in your inbox within the next week after we confirm your consent video and check that your child is in the age range for this study (If you don't hear from us by then, feel free to reach out!). If you participate again with another child in the age range, you'll receive one gift card per child."
                      },
                      {
                          "title": "Questions or Concerns:",
                          "text": "Please do not hesitate to contact Adani Abutto at aabutto@stanford.edu"
                      }
                  ]
              }
          }



      },
      sequence: [
          'welcome',
          'video-config',
          'video-consent',
          'audio-check',
          'instruction-video',
          'start-recording',
          'mirror-trial',
          'stop-recording',
          "mirror-questions",
          'exit-survey'
      ]
  };
}